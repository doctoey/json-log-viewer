<!DOCTYPE html>
<html lang="th">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏•‡∏á JSON Log ‡πÉ‡∏´‡πâ‡∏≠‡πà‡∏≤‡∏ô‡∏á‡πà‡∏≤‡∏¢</title>
    <style>
      :root {
        --bg: #0b1220;
        --panel: #071229;
        --muted: #9aa9bd;
        --text: #e6eef8;
        --accent: #3b82f6;
        --accent-2: #60a5fa;
        --card-border: rgba(255, 255, 255, 0.035);
      }

      * {
        box-sizing: border-box;
      }

      body {
        font-family: "Sarabun", Inter, system-ui, -apple-system, "Segoe UI",
          Roboto, sans-serif;
        background-color: var(--bg);
        color: var(--text);
        padding: 28px 20px;
        max-width: 900px;
        margin: 0 auto;
        -webkit-font-smoothing: antialiased;
        -moz-osx-font-smoothing: grayscale;
      }

      h1 {
        color: var(--text);
        text-align: center;
        font-size: 28px;
        margin: 6px 0 18px;
        letter-spacing: 0.2px;
      }

      .container {
        background: linear-gradient(
          180deg,
          rgba(255, 255, 255, 0.01),
          rgba(255, 255, 255, 0.007)
        );
        padding: 22px;
        border-radius: 12px;
        box-shadow: 0 10px 30px rgba(2, 6, 23, 0.6);
        border: 1px solid var(--card-border);
      }

      label {
        display: block;
        color: var(--muted);
        font-weight: 600;
        margin-bottom: 8px;
      }

      textarea {
        width: 100%;
        height: 160px;
        border-radius: 10px;
        padding: 14px;
        font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, "Roboto Mono",
          monospace;
        background: linear-gradient(180deg, #041225, #071226);
        color: var(--text);
        border: 1px solid rgba(255, 255, 255, 0.03);
        font-size: 13.5px;
        line-height: 1.45;
        resize: vertical;
      }
      textarea::placeholder {
        color: rgba(230, 238, 248, 0.45);
      }

      button {
        display: inline-block;
        width: 100%;
        padding: 12px 18px;
        border-radius: 10px;
        border: 0;
        background: linear-gradient(90deg, var(--accent), var(--accent-2));
        color: #fff;
        font-weight: 700;
        font-size: 15px;
        cursor: pointer;
        margin-top: 12px;
        box-shadow: 0 6px 18px rgba(59, 130, 246, 0.18);
      }
      button:active {
        transform: translateY(1px);
      }

      .result-box {
        margin-top: 20px;
        background: linear-gradient(180deg, #051329, #061225);
        padding: 18px;
        border-radius: 10px;
        overflow: auto;
        display: none;
        border: 1px solid var(--card-border);
      }

      pre {
        margin: 0;
        font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, "Roboto Mono",
          monospace;
        font-size: 15px;
        color: var(--text);
        line-height: 1.6;
        white-space: pre-wrap;
        word-break: break-word;
      }

      /* improved syntax colors with balanced contrast */
      .key {
          color: #e06c75;
        font-weight: 600;
      }
      .string {
        color: #a3e635;
      }
      .number {
        color: #ffd57e;
      }
      .boolean {
        color: #60a5fa;
      }
      .null {
        color: #c084fc;
      }

      /* make the JSON block look like a code card */
      .result-box pre {
        background: transparent;
        padding: 0;
      }

      /* responsive tweaks */
      @media (max-width: 520px) {
        h1 {
          font-size: 20px;
        }
        textarea {
          height: 140px;
        }
        pre {
          font-size: 13px;
        }
      }
    </style>
  </head>
  <body>
    <div class="container">
      <h1>üõ†Ô∏è ‡πÅ‡∏õ‡∏•‡∏á Log ‡πÉ‡∏´‡πâ‡∏≠‡πà‡∏≤‡∏ô‡∏á‡πà‡∏≤‡∏¢</h1>

      <label for="inputData">‡∏ß‡∏≤‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏° (String) ‡∏ó‡∏µ‡πà‡∏ô‡∏µ‡πà:</label>
      <textarea
        id="inputData"
        placeholder='‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á: "{\"log\":{\"event\":...}}"'
      ></textarea>

      <button onclick="convertJson()">‡πÅ‡∏õ‡∏•‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•</button>

      <div id="resultContainer" class="result-box">
        <pre id="output"></pre>
      </div>
    </div>

    <script>
      function convertJson() {
        const input = document.getElementById("inputData").value.trim();
        const outputDiv = document.getElementById("output");
        const resultBox = document.getElementById("resultContainer");

        if (!input) {
          alert("‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏ß‡∏≤‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Å‡πà‡∏≠‡∏ô‡∏Ñ‡∏£‡∏±‡∏ö");
          return;
        }

        try {
          let parsedData;

          // 1. ‡∏•‡∏≠‡∏á Parse ‡∏£‡∏≠‡∏ö‡πÅ‡∏£‡∏Å (‡πÄ‡∏ú‡∏∑‡πà‡∏≠ user ‡∏Å‡πä‡∏≠‡∏õ‡∏°‡∏≤‡πÅ‡∏ö‡∏ö object ‡∏≠‡∏¢‡∏π‡πà‡πÅ‡∏•‡πâ‡∏ß)
          try {
            parsedData = JSON.parse(input);
          } catch (e) {
            parsedData = input;
          }

          // 2. ‡∏ñ‡πâ‡∏≤‡πÄ‡∏õ‡πá‡∏ô string ‡∏≠‡∏µ‡∏Å‡∏ó‡∏µ ‡πÉ‡∏´‡πâ parse ‡∏ã‡πâ‡∏≠‡∏ô
          if (typeof parsedData === "string") {
            try {
              parsedData = JSON.parse(parsedData);
            } catch (e) {
              throw new Error("Format ‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á");
            }
          }

          // 3. ‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏•
          const prettyHtml = syntaxHighlight(parsedData);
          outputDiv.innerHTML = prettyHtml;
          resultBox.style.display = "block";
        } catch (error) {
          alert("‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î: ‡∏£‡∏π‡∏õ‡πÅ‡∏ö‡∏ö JSON ‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á\n" + error.message);
          console.error(error);
        }
      }

      function syntaxHighlight(json) {
        if (typeof json != "string") {
          json = JSON.stringify(json, undefined, 2);
        }
        json = json
          .replace(/&/g, "&amp;")
          .replace(/</g, "&lt;")
          .replace(/>/g, "&gt;");
        return json.replace(
          /("(\\u[a-zA-Z0-9]{4}|\\[^u]|[^\\"])*"(\s*:)?|\b(true|false|null)\b|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?)/g,
          function (match) {
            var cls = "number";
            if (/^"/.test(match)) {
              if (/:$/.test(match)) {
                cls = "key";
              } else {
                cls = "string";
              }
            } else if (/true|false/.test(match)) {
              cls = "boolean";
            } else if (/null/.test(match)) {
              cls = "null";
            }
            return '<span class="' + cls + '">' + match + "</span>";
          }
        );
      }
    </script>
  </body>
</html>
